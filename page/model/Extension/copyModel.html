<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>SoonSpace develop test</title>
  <link rel="stylesheet" href="../../../asstes/css/base.css">
  <link rel="stylesheet" href="../../../asstes/css/tool.css">
</head>

<body>
  <div id="view">
    <div class="right-top-toolBax">
      <button id="copy">复制模型</button>
      <button id="cancel">取消操作</button>
    </div>
  </div>

  <script src="../../../sdk/index.js"></script>
  <script>

    let oldModel = null
    let copyModel = null

    document.getElementById("copy").onclick = function () {

      if (oldModel) {

        copyModel = ssp.copyModel(
          oldModel,
          {
            mode: 'matrix3D', // row、column、matrix、matrix3D
            copyNumber: 3,
            rowNumber: 3,
            rowSpace: 100,
            columnNumber: 3,
            columnSpace: 100,
            layerNumber: 3,
            layerSpace: 100
          },
          num => console.log('progres', num),
          res => console.log('done', res)
        );

      } else alert("请点击选中模型！")

    }

    document.getElementById("cancel").onclick = function () {

      if (oldModel) {

        if (copyModel) {

          copyModel.cancel()

        }

        else alert("请先开始复制模型！")

      } else alert("请点击选中模型！")

    }

    const ssp = new SoonSpace({
      el: '#view',
      option: {
        backgroundColor: 0x333300
      },
      events: {

        modelClick(param) {

          oldModel = param.target

        }

      }
    })

    // 样例模型服务地址
    const baseUrl = '../../../asstes/model/sbk/oneroom'

    const mapsUrl = `${baseUrl}/Maps/`

    const sbmsInfo = [
      {
        id: '1F',
        name: '1F',
        url: `${baseUrl}/oneroom_1F_0.sbm`,
        mapsUrl
      },
    ]

    ssp.loadSbm(sbmsInfo)

      .then(models => {

        ssp.createGround({
          imgUrl: '../../../asstes/img/ground/001.jpg',
          width: 10000,
          height: 10000,
          position: { x: 0, y: -5, z: 0 }
        })

      })


  </script>
</body>

</html>